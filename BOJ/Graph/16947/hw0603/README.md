## Info
[16947 서울 지하철 2호선](https://www.acmicpc.net/problem/16947)

## 💡 풀이 방법 요약
DFS를 이용하여 사이클을 탐지하고, BFS를 이용하여 각 노드와 순환선 간의 거리를 구한다.  
노드 데이터를 입력받아 양방향 인접 리스트를 구축한 뒤, 첫 번째 노드부터 dfs 탐색을 진행한다.  
DFS 탐색 중에 해당 노드 방문까지 재귀 깊이가 얼마나 들어갔는지를 체크하여 `dist` 배열에 거리 정보를 저장해 주고, 인접한 노드에 대해 모두 재귀호출한다. `dfs()`는 처음 사이클이 감지되었을 때 방문한 노드를 계속해서 반환하고, 반환 이후에는 각 단계의 콜스택에 쌓여 있는 노드들의 상태를 `IN_CYCLE`로 마킹하여 감지한 사이클 내에 존재하는 모든 노드들을 파악할 수 있다.  
  
사이클 감지가 완료됐으면 BFS를 진행하는데, 순환선과의 거리를 구하는 것이므로 사이클 내에 있는 노드들을 모두 큐에 추가하면서 거리는 모두 `0`으로 초기화해 두고, 지선 노드들은 다른 값을 부여하여 마킹한다.  
마지막으로 BFS탐색을 진행하면서 `인접 노드의 거리 = 현재 노드의 거리 + 1` 임을 이용하여 지선 노드들에 대해 거리를 업데이트해 준다.

## 🙂 마무리
DFS로 사이클을 감지하는 것 까지는 어렵지 않게 생각할 수 있었으나, 상세 구현은 쉽지만은 않았다. 반환값으로 사이클 감지 여부를 체크하고, 사이클 감지 시 리턴하면서 사이클에 노드를 추가해 주는 것이 포인트.  
사이클 생성 후 거리 계산 시에도 각 노드를 순회하면서 거리를 찾기보다는 BFS로 한 번에 찾는 것이 빠른데, 생각하는데 시간이 좀 걸렸다.
